901ea44a7af9d281e94db025a9d8dfbb









'use strict';var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self, call) {if (!self) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call && (typeof call === "object" || typeof call === "function") ? call : self;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;}

var MetroListView = require('MetroListView');
var React = require('React');
var View = require('View');
var VirtualizedList = require('VirtualizedList');
var ListView = require('ListView');
var StyleSheet = require('StyleSheet');

var invariant = require('fbjs/lib/invariant');





































































































































































































var defaultProps = _extends({},
VirtualizedList.defaultProps, {
  numColumns: 1 });var















































































































FlatList = function (_React$PureComponent) {_inherits(FlatList, _React$PureComponent);_createClass(FlatList, [{ key: 'scrollToEnd', value: function scrollToEnd(





    params) {
      if (this._listRef) {
        this._listRef.scrollToEnd(params);
      }
    } }, { key: 'scrollToIndex', value: function scrollToIndex(









    params)




    {
      if (this._listRef) {

        this._listRef.scrollToIndex(params);
      }
    } }, { key: 'scrollToItem', value: function scrollToItem(







    params)



    {
      if (this._listRef) {

        this._listRef.scrollToItem(params);
      }
    } }, { key: 'scrollToOffset', value: function scrollToOffset(






    params) {
      if (this._listRef) {

        this._listRef.scrollToOffset(params);
      }
    } }, { key: 'recordInteraction', value: function recordInteraction()






    {
      if (this._listRef) {

        this._listRef.recordInteraction();
      }
    } }, { key: 'flashScrollIndicators', value: function flashScrollIndicators()






    {
      if (this._listRef) {

        this._listRef.flashScrollIndicators();
      }
    } }, { key: 'getScrollResponder', value: function getScrollResponder()




    {
      if (this._listRef) {

        return this._listRef.getScrollResponder();
      }
    } }, { key: 'getScrollableNode', value: function getScrollableNode()

    {
      if (this._listRef) {

        return this._listRef.getScrollableNode();
      }
    } }, { key: 'setNativeProps', value: function setNativeProps(

    props) {
      if (this._listRef) {
        this._listRef.setNativeProps(props);
      }
    } }]);

  function FlatList(props) {_classCallCheck(this, FlatList);var _this = _possibleConstructorReturn(this, (FlatList.__proto__ || Object.getPrototypeOf(FlatList)).call(this,
    props));_this.














































    _hasWarnedLegacy = false;_this.

    _virtualizedListPairs = [];_this.

    _captureRef = function (ref) {
      _this._listRef = ref;
    };_this.














































    _getItem = function (data, index) {var
      numColumns = _this.props.numColumns;
      if (numColumns > 1) {
        var ret = [];
        for (var kk = 0; kk < numColumns; kk++) {
          var _item = data[index * numColumns + kk];
          if (_item != null) {
            ret.push(_item);
          }
        }
        return ret;
      } else {
        return data[index];
      }
    };_this.

    _getItemCount = function (data) {
      return data ? Math.ceil(data.length / _this.props.numColumns) : 0;
    };_this.

    _keyExtractor = function (items, index) {var _this$props =
      _this.props,keyExtractor = _this$props.keyExtractor,numColumns = _this$props.numColumns;
      if (numColumns > 1) {
        invariant(
        Array.isArray(items),
        'FlatList: Encountered internal consistency error, expected each item to consist of an ' +
        'array with 1-%s columns; instead, received a single item.',
        numColumns);

        return items.
        map(function (it, kk) {return keyExtractor(it, index * numColumns + kk);}).
        join(':');
      } else {



        return keyExtractor(items, index);
      }
    };_this.





































    _renderItem = function (info) {var _this$props2 =
      _this.props,renderItem = _this$props2.renderItem,numColumns = _this$props2.numColumns,columnWrapperStyle = _this$props2.columnWrapperStyle;
      if (numColumns > 1) {var
        _item2 = info.item,_index = info.index;
        invariant(
        Array.isArray(_item2),
        'Expected array of items with numColumns > 1');

        return (
          React.createElement(View, {
              style: StyleSheet.compose(
              styles.row,
              columnWrapperStyle) },

            _item2.map(function (it, kk) {
              var element = renderItem({
                item: it,
                index: _index * numColumns + kk,
                separators: info.separators });

              return element && React.cloneElement(element, { key: kk });
            })));


      } else {
        return renderItem(info);
      }
    };_this._checkProps(_this.props);if (_this.props.viewabilityConfigCallbackPairs) {_this._virtualizedListPairs = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {return { viewabilityConfig: pair.viewabilityConfig, onViewableItemsChanged: _this._createOnViewableItemsChanged(pair.onViewableItemsChanged) };});} else if (_this.props.onViewableItemsChanged) {_this._virtualizedListPairs.push({ viewabilityConfig: _this.props.viewabilityConfig, onViewableItemsChanged: _this._createOnViewableItemsChanged(_this.props.onViewableItemsChanged) });}return _this;}_createClass(FlatList, [{ key: 'componentDidUpdate', value: function componentDidUpdate(prevProps) {invariant(prevProps.numColumns === this.props.numColumns, 'Changing numColumns on the fly is not supported. Change the key prop on FlatList when ' + 'changing the number of columns to force a fresh render of the component.');invariant(prevProps.onViewableItemsChanged === this.props.onViewableItemsChanged, 'Changing onViewableItemsChanged on the fly is not supported');invariant(prevProps.viewabilityConfig === this.props.viewabilityConfig, 'Changing viewabilityConfig on the fly is not supported');invariant(prevProps.viewabilityConfigCallbackPairs === this.props.viewabilityConfigCallbackPairs, 'Changing viewabilityConfigCallbackPairs on the fly is not supported');this._checkProps(this.props);} }, { key: '_checkProps', value: function _checkProps(props) {var getItem = props.getItem,getItemCount = props.getItemCount,horizontal = props.horizontal,legacyImplementation = props.legacyImplementation,numColumns = props.numColumns,columnWrapperStyle = props.columnWrapperStyle,onViewableItemsChanged = props.onViewableItemsChanged,viewabilityConfigCallbackPairs = props.viewabilityConfigCallbackPairs;invariant(!getItem && !getItemCount, 'FlatList does not support custom data formats.');if (numColumns > 1) {invariant(!horizontal, 'numColumns does not support horizontal.');} else {invariant(!columnWrapperStyle, 'columnWrapperStyle not supported for single column lists');}if (legacyImplementation) {invariant(numColumns === 1, 'Legacy list does not support multiple columns.');if (!this._hasWarnedLegacy) {console.warn('FlatList: Using legacyImplementation - some features not supported and performance ' + 'may suffer');this._hasWarnedLegacy = true;}}invariant(!(onViewableItemsChanged && viewabilityConfigCallbackPairs), 'FlatList does not support setting both onViewableItemsChanged and ' + 'viewabilityConfigCallbackPairs.');} }, { key: '_pushMultiColumnViewable', value: function _pushMultiColumnViewable(arr, v) {var _props = this.props,numColumns = _props.numColumns,keyExtractor = _props.keyExtractor;v.item.forEach(function (item, ii) {invariant(v.index != null, 'Missing index!');var index = v.index * numColumns + ii;arr.push(_extends({}, v, { item: item, key: keyExtractor(item, index), index: index }));});} }, { key: '_createOnViewableItemsChanged', value: function _createOnViewableItemsChanged(onViewableItemsChanged) {var _this2 = this;return function (info) {var numColumns = _this2.props.numColumns;if (onViewableItemsChanged) {if (numColumns > 1) {var _changed = [];var _viewableItems = [];info.viewableItems.forEach(function (v) {return _this2._pushMultiColumnViewable(_viewableItems, v);});info.changed.forEach(function (v) {return _this2._pushMultiColumnViewable(_changed, v);});onViewableItemsChanged({ viewableItems: _viewableItems, changed: _changed });} else {onViewableItemsChanged(info);}}};} }, { key: 'render', value: function render()

    {
      if (this.props.legacyImplementation) {
        return (



          React.createElement(MetroListView, _extends({},
          this.props, {



            items: this.props.data,
            ref: this._captureRef })));


      } else {
        return (
          React.createElement(VirtualizedList, _extends({},
          this.props, {
            renderItem: this._renderItem,
            getItem: this._getItem,
            getItemCount: this._getItemCount,
            keyExtractor: this._keyExtractor,
            ref: this._captureRef,
            viewabilityConfigCallbackPairs: this._virtualizedListPairs })));


      }
    } }]);return FlatList;}(React.PureComponent);FlatList.defaultProps = defaultProps;


var styles = StyleSheet.create({
  row: { flexDirection: 'row' } });


module.exports = FlatList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZsYXRMaXN0LmpzIl0sIm5hbWVzIjpbIk1ldHJvTGlzdFZpZXciLCJyZXF1aXJlIiwiUmVhY3QiLCJWaWV3IiwiVmlydHVhbGl6ZWRMaXN0IiwiTGlzdFZpZXciLCJTdHlsZVNoZWV0IiwiaW52YXJpYW50IiwiZGVmYXVsdFByb3BzIiwibnVtQ29sdW1ucyIsIkZsYXRMaXN0IiwicGFyYW1zIiwiX2xpc3RSZWYiLCJzY3JvbGxUb0VuZCIsInNjcm9sbFRvSW5kZXgiLCJzY3JvbGxUb0l0ZW0iLCJzY3JvbGxUb09mZnNldCIsInJlY29yZEludGVyYWN0aW9uIiwiZmxhc2hTY3JvbGxJbmRpY2F0b3JzIiwiZ2V0U2Nyb2xsUmVzcG9uZGVyIiwiZ2V0U2Nyb2xsYWJsZU5vZGUiLCJwcm9wcyIsInNldE5hdGl2ZVByb3BzIiwiX2hhc1dhcm5lZExlZ2FjeSIsIl92aXJ0dWFsaXplZExpc3RQYWlycyIsIl9jYXB0dXJlUmVmIiwicmVmIiwiX2dldEl0ZW0iLCJkYXRhIiwiaW5kZXgiLCJyZXQiLCJrayIsIml0ZW0iLCJwdXNoIiwiX2dldEl0ZW1Db3VudCIsIk1hdGgiLCJjZWlsIiwibGVuZ3RoIiwiX2tleUV4dHJhY3RvciIsIml0ZW1zIiwia2V5RXh0cmFjdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiaXQiLCJqb2luIiwiX3JlbmRlckl0ZW0iLCJpbmZvIiwicmVuZGVySXRlbSIsImNvbHVtbldyYXBwZXJTdHlsZSIsImNvbXBvc2UiLCJzdHlsZXMiLCJyb3ciLCJlbGVtZW50Iiwic2VwYXJhdG9ycyIsImNsb25lRWxlbWVudCIsImtleSIsIl9jaGVja1Byb3BzIiwidmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIiwidmlld2FiaWxpdHlDb25maWciLCJwYWlyIiwib25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCIsIl9jcmVhdGVPblZpZXdhYmxlSXRlbXNDaGFuZ2VkIiwicHJldlByb3BzIiwiZ2V0SXRlbSIsImdldEl0ZW1Db3VudCIsImhvcml6b250YWwiLCJsZWdhY3lJbXBsZW1lbnRhdGlvbiIsImNvbnNvbGUiLCJ3YXJuIiwiYXJyIiwidiIsImZvckVhY2giLCJpaSIsImNoYW5nZWQiLCJ2aWV3YWJsZUl0ZW1zIiwiX3B1c2hNdWx0aUNvbHVtblZpZXdhYmxlIiwiUHVyZUNvbXBvbmVudCIsImNyZWF0ZSIsImZsZXhEaXJlY3Rpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFTQSxhOztBQUVBLElBQU1BLGdCQUFnQkMsUUFBUSxlQUFSLENBQXRCO0FBQ0EsSUFBTUMsUUFBUUQsUUFBUSxPQUFSLENBQWQ7QUFDQSxJQUFNRSxPQUFPRixRQUFRLE1BQVIsQ0FBYjtBQUNBLElBQU1HLGtCQUFrQkgsUUFBUSxpQkFBUixDQUF4QjtBQUNBLElBQU1JLFdBQVdKLFFBQVEsVUFBUixDQUFqQjtBQUNBLElBQU1LLGFBQWFMLFFBQVEsWUFBUixDQUFuQjs7QUFFQSxJQUFNTSxZQUFZTixRQUFRLG9CQUFSLENBQWxCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzTUEsSUFBTU87QUFDREosZ0JBQWdCSSxZQURmO0FBRUpDLGNBQVksQ0FGUixHQUFOLEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrSE1DLFE7Ozs7OztBQU1RQyxVLEVBQWlDO0FBQzNDLFVBQUksS0FBS0MsUUFBVCxFQUFtQjtBQUNqQixhQUFLQSxRQUFMLENBQWNDLFdBQWQsQ0FB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QUtKLEtBRFg7QUFFRSx3QkFBWSxLQUFLeUIsV0FGbkI7QUFHRSxxQkFBUyxLQUFLbkIsUUFIaEI7QUFJRSwwQkFBYyxLQUFLTyxhQUpyQjtBQUtFLDBCQUFjLEtBQUtJLGFBTHJCO0FBTUUsaUJBQUssS0FBS2IsV0FOWjtBQU9FLDRDQUFnQyxLQUFLRCxxQkFQdkMsSUFERjs7O0FBV0Q7QUFDRixLLHVCQXRWMkJ0QixNQUFNMkUsYSxFQUE5Qm5FLFEsQ0FDR0YsWSxHQUE2QkEsWTs7O0FBd1Z0QyxJQUFNMkMsU0FBUzdDLFdBQVd3RSxNQUFYLENBQWtCO0FBQy9CMUIsT0FBSyxFQUFDMkIsZUFBZSxLQUFoQixFQUQwQixFQUFsQixDQUFmOzs7QUFJQUMsT0FBT0MsT0FBUCxHQUFpQnZFLFFBQWpCIiwiZmlsZSI6IkZsYXRMaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IE1ldHJvTGlzdFZpZXcgPSByZXF1aXJlKCdNZXRyb0xpc3RWaWV3Jyk7IC8vIFVzZWQgYXMgYSBmYWxsYmFjayBsZWdhY3kgb3B0aW9uXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ1JlYWN0Jyk7XG5jb25zdCBWaWV3ID0gcmVxdWlyZSgnVmlldycpO1xuY29uc3QgVmlydHVhbGl6ZWRMaXN0ID0gcmVxdWlyZSgnVmlydHVhbGl6ZWRMaXN0Jyk7XG5jb25zdCBMaXN0VmlldyA9IHJlcXVpcmUoJ0xpc3RWaWV3Jyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnU3R5bGVTaGVldCcpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuaW1wb3J0IHR5cGUge0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVQcm9wLCBWaWV3U3R5bGVQcm9wfSBmcm9tICdTdHlsZVNoZWV0JztcbmltcG9ydCB0eXBlIHtcbiAgVmlld2FiaWxpdHlDb25maWcsXG4gIFZpZXdUb2tlbixcbiAgVmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXIsXG59IGZyb20gJ1ZpZXdhYmlsaXR5SGVscGVyJztcbmltcG9ydCB0eXBlIHtQcm9wcyBhcyBWaXJ0dWFsaXplZExpc3RQcm9wc30gZnJvbSAnVmlydHVhbGl6ZWRMaXN0JztcblxuZXhwb3J0IHR5cGUgU2VwYXJhdG9yc09iaiA9IHtcbiAgaGlnaGxpZ2h0OiAoKSA9PiB2b2lkLFxuICB1bmhpZ2hsaWdodDogKCkgPT4gdm9pZCxcbiAgdXBkYXRlUHJvcHM6IChzZWxlY3Q6ICdsZWFkaW5nJyB8ICd0cmFpbGluZycsIG5ld1Byb3BzOiBPYmplY3QpID0+IHZvaWQsXG59O1xuXG50eXBlIFJlcXVpcmVkUHJvcHM8SXRlbVQ+ID0ge1xuICAvKipcbiAgICogVGFrZXMgYW4gaXRlbSBmcm9tIGBkYXRhYCBhbmQgcmVuZGVycyBpdCBpbnRvIHRoZSBsaXN0LiBFeGFtcGxlIHVzYWdlOlxuICAgKlxuICAgKiAgICAgPEZsYXRMaXN0XG4gICAqICAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ9e1BsYXRmb3JtLk9TICE9PSAnYW5kcm9pZCcgJiYgKHtoaWdobGlnaHRlZH0pID0+IChcbiAgICogICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlLnNlcGFyYXRvciwgaGlnaGxpZ2h0ZWQgJiYge21hcmdpbkxlZnQ6IDB9XX0gLz5cbiAgICogICAgICAgKX1cbiAgICogICAgICAgZGF0YT17W3t0aXRsZTogJ1RpdGxlIFRleHQnLCBrZXk6ICdpdGVtMSd9XX1cbiAgICogICAgICAgcmVuZGVySXRlbT17KHtpdGVtLCBzZXBhcmF0b3JzfSkgPT4gKFxuICAgKiAgICAgICAgIDxUb3VjaGFibGVIaWdobGlnaHRcbiAgICogICAgICAgICAgIG9uUHJlc3M9eygpID0+IHRoaXMuX29uUHJlc3MoaXRlbSl9XG4gICAqICAgICAgICAgICBvblNob3dVbmRlcmxheT17c2VwYXJhdG9ycy5oaWdobGlnaHR9XG4gICAqICAgICAgICAgICBvbkhpZGVVbmRlcmxheT17c2VwYXJhdG9ycy51bmhpZ2hsaWdodH0+XG4gICAqICAgICAgICAgICA8VmlldyBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogJ3doaXRlJ319PlxuICAgKiAgICAgICAgICAgICA8VGV4dD57aXRlbS50aXRsZX08L1RleHQ+XG4gICAqICAgICAgICAgICA8L1ZpZXc+XG4gICAqICAgICAgICAgPC9Ub3VjaGFibGVIaWdobGlnaHQ+XG4gICAqICAgICAgICl9XG4gICAqICAgICAvPlxuICAgKlxuICAgKiBQcm92aWRlcyBhZGRpdGlvbmFsIG1ldGFkYXRhIGxpa2UgYGluZGV4YCBpZiB5b3UgbmVlZCBpdCwgYXMgd2VsbCBhcyBhIG1vcmUgZ2VuZXJpY1xuICAgKiBgc2VwYXJhdG9ycy51cGRhdGVQcm9wc2AgZnVuY3Rpb24gd2hpY2ggbGV0J3MgeW91IHNldCB3aGF0ZXZlciBwcm9wcyB5b3Ugd2FudCB0byBjaGFuZ2UgdGhlXG4gICAqIHJlbmRlcmluZyBvZiBlaXRoZXIgdGhlIGxlYWRpbmcgc2VwYXJhdG9yIG9yIHRyYWlsaW5nIHNlcGFyYXRvciBpbiBjYXNlIHRoZSBtb3JlIGNvbW1vblxuICAgKiBgaGlnaGxpZ2h0YCBhbmQgYHVuaGlnaGxpZ2h0YCAod2hpY2ggc2V0IHRoZSBgaGlnaGxpZ2h0ZWQ6IGJvb2xlYW5gIHByb3ApIGFyZSBpbnN1ZmZpY2llbnQgZm9yXG4gICAqIHlvdXIgdXNlLWNhc2UuXG4gICAqL1xuICByZW5kZXJJdGVtOiAoaW5mbzoge1xuICAgIGl0ZW06IEl0ZW1ULFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgc2VwYXJhdG9yczogU2VwYXJhdG9yc09iaixcbiAgfSkgPT4gP1JlYWN0LkVsZW1lbnQ8YW55PixcbiAgLyoqXG4gICAqIEZvciBzaW1wbGljaXR5LCBkYXRhIGlzIGp1c3QgYSBwbGFpbiBhcnJheS4gSWYgeW91IHdhbnQgdG8gdXNlIHNvbWV0aGluZyBlbHNlLCBsaWtlIGFuXG4gICAqIGltbXV0YWJsZSBsaXN0LCB1c2UgdGhlIHVuZGVybHlpbmcgYFZpcnR1YWxpemVkTGlzdGAgZGlyZWN0bHkuXG4gICAqL1xuICBkYXRhOiA/JFJlYWRPbmx5QXJyYXk8SXRlbVQ+LFxufTtcbnR5cGUgT3B0aW9uYWxQcm9wczxJdGVtVD4gPSB7XG4gIC8qKlxuICAgKiBSZW5kZXJlZCBpbiBiZXR3ZWVuIGVhY2ggaXRlbSwgYnV0IG5vdCBhdCB0aGUgdG9wIG9yIGJvdHRvbS4gQnkgZGVmYXVsdCwgYGhpZ2hsaWdodGVkYCBhbmRcbiAgICogYGxlYWRpbmdJdGVtYCBwcm9wcyBhcmUgcHJvdmlkZWQuIGByZW5kZXJJdGVtYCBwcm92aWRlcyBgc2VwYXJhdG9ycy5oaWdobGlnaHRgL2B1bmhpZ2hsaWdodGBcbiAgICogd2hpY2ggd2lsbCB1cGRhdGUgdGhlIGBoaWdobGlnaHRlZGAgcHJvcCwgYnV0IHlvdSBjYW4gYWxzbyBhZGQgY3VzdG9tIHByb3BzIHdpdGhcbiAgICogYHNlcGFyYXRvcnMudXBkYXRlUHJvcHNgLlxuICAgKi9cbiAgSXRlbVNlcGFyYXRvckNvbXBvbmVudD86ID9SZWFjdC5Db21wb25lbnRUeXBlPGFueT4sXG4gIC8qKlxuICAgKiBSZW5kZXJlZCB3aGVuIHRoZSBsaXN0IGlzIGVtcHR5LiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0RW1wdHlDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBSZW5kZXJlZCBhdCB0aGUgYm90dG9tIG9mIGFsbCB0aGUgaXRlbXMuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RGb290ZXJDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBTdHlsaW5nIGZvciBpbnRlcm5hbCBWaWV3IGZvciBMaXN0Rm9vdGVyQ29tcG9uZW50XG4gICAqL1xuICBMaXN0Rm9vdGVyQ29tcG9uZW50U3R5bGU/OiBWaWV3U3R5bGVQcm9wLFxuICAvKipcbiAgICogUmVuZGVyZWQgYXQgdGhlIHRvcCBvZiBhbGwgdGhlIGl0ZW1zLiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0SGVhZGVyQ29tcG9uZW50PzogPyhSZWFjdC5Db21wb25lbnRUeXBlPGFueT4gfCBSZWFjdC5FbGVtZW50PGFueT4pLFxuICAvKipcbiAgICogU3R5bGluZyBmb3IgaW50ZXJuYWwgVmlldyBmb3IgTGlzdEhlYWRlckNvbXBvbmVudFxuICAgKi9cbiAgTGlzdEhlYWRlckNvbXBvbmVudFN0eWxlPzogVmlld1N0eWxlUHJvcCxcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGN1c3RvbSBzdHlsZSBmb3IgbXVsdGktaXRlbSByb3dzIGdlbmVyYXRlZCB3aGVuIG51bUNvbHVtbnMgPiAxLlxuICAgKi9cbiAgY29sdW1uV3JhcHBlclN0eWxlPzogRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3AsXG4gIC8qKlxuICAgKiBBIG1hcmtlciBwcm9wZXJ0eSBmb3IgdGVsbGluZyB0aGUgbGlzdCB0byByZS1yZW5kZXIgKHNpbmNlIGl0IGltcGxlbWVudHMgYFB1cmVDb21wb25lbnRgKS4gSWZcbiAgICogYW55IG9mIHlvdXIgYHJlbmRlckl0ZW1gLCBIZWFkZXIsIEZvb3RlciwgZXRjLiBmdW5jdGlvbnMgZGVwZW5kIG9uIGFueXRoaW5nIG91dHNpZGUgb2YgdGhlXG4gICAqIGBkYXRhYCBwcm9wLCBzdGljayBpdCBoZXJlIGFuZCB0cmVhdCBpdCBpbW11dGFibHkuXG4gICAqL1xuICBleHRyYURhdGE/OiBhbnksXG4gIC8qKlxuICAgKiBgZ2V0SXRlbUxheW91dGAgaXMgYW4gb3B0aW9uYWwgb3B0aW1pemF0aW9ucyB0aGF0IGxldCB1cyBza2lwIG1lYXN1cmVtZW50IG9mIGR5bmFtaWMgY29udGVudCBpZlxuICAgKiB5b3Uga25vdyB0aGUgaGVpZ2h0IG9mIGl0ZW1zIGEgcHJpb3JpLiBgZ2V0SXRlbUxheW91dGAgaXMgdGhlIG1vc3QgZWZmaWNpZW50LCBhbmQgaXMgZWFzeSB0b1xuICAgKiB1c2UgaWYgeW91IGhhdmUgZml4ZWQgaGVpZ2h0IGl0ZW1zLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogICAgIGdldEl0ZW1MYXlvdXQ9eyhkYXRhLCBpbmRleCkgPT4gKFxuICAgKiAgICAgICB7bGVuZ3RoOiBJVEVNX0hFSUdIVCwgb2Zmc2V0OiBJVEVNX0hFSUdIVCAqIGluZGV4LCBpbmRleH1cbiAgICogICAgICl9XG4gICAqXG4gICAqIEFkZGluZyBgZ2V0SXRlbUxheW91dGAgY2FuIGJlIGEgZ3JlYXQgcGVyZm9ybWFuY2UgYm9vc3QgZm9yIGxpc3RzIG9mIHNldmVyYWwgaHVuZHJlZCBpdGVtcy5cbiAgICogUmVtZW1iZXIgdG8gaW5jbHVkZSBzZXBhcmF0b3IgbGVuZ3RoIChoZWlnaHQgb3Igd2lkdGgpIGluIHlvdXIgb2Zmc2V0IGNhbGN1bGF0aW9uIGlmIHlvdVxuICAgKiBzcGVjaWZ5IGBJdGVtU2VwYXJhdG9yQ29tcG9uZW50YC5cbiAgICovXG4gIGdldEl0ZW1MYXlvdXQ/OiAoXG4gICAgZGF0YTogP0FycmF5PEl0ZW1UPixcbiAgICBpbmRleDogbnVtYmVyLFxuICApID0+IHtsZW5ndGg6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIsIGluZGV4OiBudW1iZXJ9LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgcmVuZGVycyBpdGVtcyBuZXh0IHRvIGVhY2ggb3RoZXIgaG9yaXpvbnRhbGx5IGluc3RlYWQgb2Ygc3RhY2tlZCB2ZXJ0aWNhbGx5LlxuICAgKi9cbiAgaG9yaXpvbnRhbD86ID9ib29sZWFuLFxuICAvKipcbiAgICogSG93IG1hbnkgaXRlbXMgdG8gcmVuZGVyIGluIHRoZSBpbml0aWFsIGJhdGNoLiBUaGlzIHNob3VsZCBiZSBlbm91Z2ggdG8gZmlsbCB0aGUgc2NyZWVuIGJ1dCBub3RcbiAgICogbXVjaCBtb3JlLiBOb3RlIHRoZXNlIGl0ZW1zIHdpbGwgbmV2ZXIgYmUgdW5tb3VudGVkIGFzIHBhcnQgb2YgdGhlIHdpbmRvd2VkIHJlbmRlcmluZyBpbiBvcmRlclxuICAgKiB0byBpbXByb3ZlIHBlcmNlaXZlZCBwZXJmb3JtYW5jZSBvZiBzY3JvbGwtdG8tdG9wIGFjdGlvbnMuXG4gICAqL1xuICBpbml0aWFsTnVtVG9SZW5kZXI6IG51bWJlcixcbiAgLyoqXG4gICAqIEluc3RlYWQgb2Ygc3RhcnRpbmcgYXQgdGhlIHRvcCB3aXRoIHRoZSBmaXJzdCBpdGVtLCBzdGFydCBhdCBgaW5pdGlhbFNjcm9sbEluZGV4YC4gVGhpc1xuICAgKiBkaXNhYmxlcyB0aGUgXCJzY3JvbGwgdG8gdG9wXCIgb3B0aW1pemF0aW9uIHRoYXQga2VlcHMgdGhlIGZpcnN0IGBpbml0aWFsTnVtVG9SZW5kZXJgIGl0ZW1zXG4gICAqIGFsd2F5cyByZW5kZXJlZCBhbmQgaW1tZWRpYXRlbHkgcmVuZGVycyB0aGUgaXRlbXMgc3RhcnRpbmcgYXQgdGhpcyBpbml0aWFsIGluZGV4LiBSZXF1aXJlc1xuICAgKiBgZ2V0SXRlbUxheW91dGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gICAqL1xuICBpbml0aWFsU2Nyb2xsSW5kZXg/OiA/bnVtYmVyLFxuICAvKipcbiAgICogUmV2ZXJzZXMgdGhlIGRpcmVjdGlvbiBvZiBzY3JvbGwuIFVzZXMgc2NhbGUgdHJhbnNmb3JtcyBvZiAtMS5cbiAgICovXG4gIGludmVydGVkPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBVc2VkIHRvIGV4dHJhY3QgYSB1bmlxdWUga2V5IGZvciBhIGdpdmVuIGl0ZW0gYXQgdGhlIHNwZWNpZmllZCBpbmRleC4gS2V5IGlzIHVzZWQgZm9yIGNhY2hpbmdcbiAgICogYW5kIGFzIHRoZSByZWFjdCBrZXkgdG8gdHJhY2sgaXRlbSByZS1vcmRlcmluZy4gVGhlIGRlZmF1bHQgZXh0cmFjdG9yIGNoZWNrcyBgaXRlbS5rZXlgLCB0aGVuXG4gICAqIGZhbGxzIGJhY2sgdG8gdXNpbmcgdGhlIGluZGV4LCBsaWtlIFJlYWN0IGRvZXMuXG4gICAqL1xuICBrZXlFeHRyYWN0b3I6IChpdGVtOiBJdGVtVCwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxuICAvKipcbiAgICogTXVsdGlwbGUgY29sdW1ucyBjYW4gb25seSBiZSByZW5kZXJlZCB3aXRoIGBob3Jpem9udGFsPXtmYWxzZX1gIGFuZCB3aWxsIHppZy16YWcgbGlrZSBhXG4gICAqIGBmbGV4V3JhcGAgbGF5b3V0LiBJdGVtcyBzaG91bGQgYWxsIGJlIHRoZSBzYW1lIGhlaWdodCAtIG1hc29ucnkgbGF5b3V0cyBhcmUgbm90IHN1cHBvcnRlZC5cbiAgICovXG4gIG51bUNvbHVtbnM6IG51bWJlcixcbiAgLyoqXG4gICAqIENhbGxlZCBvbmNlIHdoZW4gdGhlIHNjcm9sbCBwb3NpdGlvbiBnZXRzIHdpdGhpbiBgb25FbmRSZWFjaGVkVGhyZXNob2xkYCBvZiB0aGUgcmVuZGVyZWRcbiAgICogY29udGVudC5cbiAgICovXG4gIG9uRW5kUmVhY2hlZD86ID8oaW5mbzoge2Rpc3RhbmNlRnJvbUVuZDogbnVtYmVyfSkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIEhvdyBmYXIgZnJvbSB0aGUgZW5kIChpbiB1bml0cyBvZiB2aXNpYmxlIGxlbmd0aCBvZiB0aGUgbGlzdCkgdGhlIGJvdHRvbSBlZGdlIG9mIHRoZVxuICAgKiBsaXN0IG11c3QgYmUgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb250ZW50IHRvIHRyaWdnZXIgdGhlIGBvbkVuZFJlYWNoZWRgIGNhbGxiYWNrLlxuICAgKiBUaHVzIGEgdmFsdWUgb2YgMC41IHdpbGwgdHJpZ2dlciBgb25FbmRSZWFjaGVkYCB3aGVuIHRoZSBlbmQgb2YgdGhlIGNvbnRlbnQgaXNcbiAgICogd2l0aGluIGhhbGYgdGhlIHZpc2libGUgbGVuZ3RoIG9mIHRoZSBsaXN0LlxuICAgKi9cbiAgb25FbmRSZWFjaGVkVGhyZXNob2xkPzogP251bWJlcixcbiAgLyoqXG4gICAqIElmIHByb3ZpZGVkLCBhIHN0YW5kYXJkIFJlZnJlc2hDb250cm9sIHdpbGwgYmUgYWRkZWQgZm9yIFwiUHVsbCB0byBSZWZyZXNoXCIgZnVuY3Rpb25hbGl0eS4gTWFrZVxuICAgKiBzdXJlIHRvIGFsc28gc2V0IHRoZSBgcmVmcmVzaGluZ2AgcHJvcCBjb3JyZWN0bHkuXG4gICAqL1xuICBvblJlZnJlc2g/OiA/KCkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3YWJpbGl0eSBvZiByb3dzIGNoYW5nZXMsIGFzIGRlZmluZWQgYnkgdGhlIGB2aWV3YWJpbGl0eUNvbmZpZ2AgcHJvcC5cbiAgICovXG4gIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ/OiA/KGluZm86IHtcbiAgICB2aWV3YWJsZUl0ZW1zOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIGNoYW5nZWQ6IEFycmF5PFZpZXdUb2tlbj4sXG4gIH0pID0+IHZvaWQsXG4gIC8qKlxuICAgKiBTZXQgdGhpcyB3aGVuIG9mZnNldCBpcyBuZWVkZWQgZm9yIHRoZSBsb2FkaW5nIGluZGljYXRvciB0byBzaG93IGNvcnJlY3RseS5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHByb2dyZXNzVmlld09mZnNldD86IG51bWJlcixcbiAgbGVnYWN5SW1wbGVtZW50YXRpb24/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIFNldCB0aGlzIHRydWUgd2hpbGUgd2FpdGluZyBmb3IgbmV3IGRhdGEgZnJvbSBhIHJlZnJlc2guXG4gICAqL1xuICByZWZyZXNoaW5nPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBOb3RlOiBtYXkgaGF2ZSBidWdzIChtaXNzaW5nIGNvbnRlbnQpIGluIHNvbWUgY2lyY3Vtc3RhbmNlcyAtIHVzZSBhdCB5b3VyIG93biByaXNrLlxuICAgKlxuICAgKiBUaGlzIG1heSBpbXByb3ZlIHNjcm9sbCBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgbGlzdHMuXG4gICAqL1xuICByZW1vdmVDbGlwcGVkU3Vidmlld3M/OiBib29sZWFuLFxuICAvKipcbiAgICogU2VlIGBWaWV3YWJpbGl0eUhlbHBlcmAgZm9yIGZsb3cgdHlwZSBhbmQgZnVydGhlciBkb2N1bWVudGF0aW9uLlxuICAgKi9cbiAgdmlld2FiaWxpdHlDb25maWc/OiBWaWV3YWJpbGl0eUNvbmZpZyxcbiAgLyoqXG4gICAqIExpc3Qgb2YgVmlld2FiaWxpdHlDb25maWcvb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBwYWlycy4gQSBzcGVjaWZpYyBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkXG4gICAqIHdpbGwgYmUgY2FsbGVkIHdoZW4gaXRzIGNvcnJlc3BvbmRpbmcgVmlld2FiaWxpdHlDb25maWcncyBjb25kaXRpb25zIGFyZSBtZXQuXG4gICAqL1xuICB2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnM/OiBBcnJheTxWaWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcj4sXG59O1xuZXhwb3J0IHR5cGUgUHJvcHM8SXRlbVQ+ID0gUmVxdWlyZWRQcm9wczxJdGVtVD4gJlxuICBPcHRpb25hbFByb3BzPEl0ZW1UPiAmXG4gIFZpcnR1YWxpemVkTGlzdFByb3BzO1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIC4uLlZpcnR1YWxpemVkTGlzdC5kZWZhdWx0UHJvcHMsXG4gIG51bUNvbHVtbnM6IDEsXG59O1xuZXhwb3J0IHR5cGUgRGVmYXVsdFByb3BzID0gdHlwZW9mIGRlZmF1bHRQcm9wcztcblxuLyoqXG4gKiBBIHBlcmZvcm1hbnQgaW50ZXJmYWNlIGZvciByZW5kZXJpbmcgc2ltcGxlLCBmbGF0IGxpc3RzLCBzdXBwb3J0aW5nIHRoZSBtb3N0IGhhbmR5IGZlYXR1cmVzOlxuICpcbiAqICAtIEZ1bGx5IGNyb3NzLXBsYXRmb3JtLlxuICogIC0gT3B0aW9uYWwgaG9yaXpvbnRhbCBtb2RlLlxuICogIC0gQ29uZmlndXJhYmxlIHZpZXdhYmlsaXR5IGNhbGxiYWNrcy5cbiAqICAtIEhlYWRlciBzdXBwb3J0LlxuICogIC0gRm9vdGVyIHN1cHBvcnQuXG4gKiAgLSBTZXBhcmF0b3Igc3VwcG9ydC5cbiAqICAtIFB1bGwgdG8gUmVmcmVzaC5cbiAqICAtIFNjcm9sbCBsb2FkaW5nLlxuICogIC0gU2Nyb2xsVG9JbmRleCBzdXBwb3J0LlxuICpcbiAqIElmIHlvdSBuZWVkIHNlY3Rpb24gc3VwcG9ydCwgdXNlIFtgPFNlY3Rpb25MaXN0PmBdKGRvY3Mvc2VjdGlvbmxpc3QuaHRtbCkuXG4gKlxuICogTWluaW1hbCBFeGFtcGxlOlxuICpcbiAqICAgICA8RmxhdExpc3RcbiAqICAgICAgIGRhdGE9e1t7a2V5OiAnYSd9LCB7a2V5OiAnYid9XX1cbiAqICAgICAgIHJlbmRlckl0ZW09eyh7aXRlbX0pID0+IDxUZXh0PntpdGVtLmtleX08L1RleHQ+fVxuICogICAgIC8+XG4gKlxuICogTW9yZSBjb21wbGV4LCBtdWx0aS1zZWxlY3QgZXhhbXBsZSBkZW1vbnN0cmF0aW5nIGBQdXJlQ29tcG9uZW50YCB1c2FnZSBmb3IgcGVyZiBvcHRpbWl6YXRpb24gYW5kIGF2b2lkaW5nIGJ1Z3MuXG4gKlxuICogLSBCeSBiaW5kaW5nIHRoZSBgb25QcmVzc0l0ZW1gIGhhbmRsZXIsIHRoZSBwcm9wcyB3aWxsIHJlbWFpbiBgPT09YCBhbmQgYFB1cmVDb21wb25lbnRgIHdpbGxcbiAqICAgcHJldmVudCB3YXN0ZWZ1bCByZS1yZW5kZXJzIHVubGVzcyB0aGUgYWN0dWFsIGBpZGAsIGBzZWxlY3RlZGAsIG9yIGB0aXRsZWAgcHJvcHMgY2hhbmdlLCBldmVuXG4gKiAgIGlmIHRoZSBjb21wb25lbnRzIHJlbmRlcmVkIGluIGBNeUxpc3RJdGVtYCBkaWQgbm90IGhhdmUgc3VjaCBvcHRpbWl6YXRpb25zLlxuICogLSBCeSBwYXNzaW5nIGBleHRyYURhdGE9e3RoaXMuc3RhdGV9YCB0byBgRmxhdExpc3RgIHdlIG1ha2Ugc3VyZSBgRmxhdExpc3RgIGl0c2VsZiB3aWxsIHJlLXJlbmRlclxuICogICB3aGVuIHRoZSBgc3RhdGUuc2VsZWN0ZWRgIGNoYW5nZXMuIFdpdGhvdXQgc2V0dGluZyB0aGlzIHByb3AsIGBGbGF0TGlzdGAgd291bGQgbm90IGtub3cgaXRcbiAqICAgbmVlZHMgdG8gcmUtcmVuZGVyIGFueSBpdGVtcyBiZWNhdXNlIGl0IGlzIGFsc28gYSBgUHVyZUNvbXBvbmVudGAgYW5kIHRoZSBwcm9wIGNvbXBhcmlzb24gd2lsbFxuICogICBub3Qgc2hvdyBhbnkgY2hhbmdlcy5cbiAqIC0gYGtleUV4dHJhY3RvcmAgdGVsbHMgdGhlIGxpc3QgdG8gdXNlIHRoZSBgaWRgcyBmb3IgdGhlIHJlYWN0IGtleXMgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBga2V5YCBwcm9wZXJ0eS5cbiAqXG4gKlxuICogICAgIGNsYXNzIE15TGlzdEl0ZW0gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAqICAgICAgIF9vblByZXNzID0gKCkgPT4ge1xuICogICAgICAgICB0aGlzLnByb3BzLm9uUHJlc3NJdGVtKHRoaXMucHJvcHMuaWQpO1xuICogICAgICAgfTtcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IHRoaXMucHJvcHMuc2VsZWN0ZWQgPyBcInJlZFwiIDogXCJibGFja1wiO1xuICogICAgICAgICByZXR1cm4gKFxuICogICAgICAgICAgIDxUb3VjaGFibGVPcGFjaXR5IG9uUHJlc3M9e3RoaXMuX29uUHJlc3N9PlxuICogICAgICAgICAgICAgPFZpZXc+XG4gKiAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXt7IGNvbG9yOiB0ZXh0Q29sb3IgfX0+XG4gKiAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMudGl0bGV9XG4gKiAgICAgICAgICAgICAgIDwvVGV4dD5cbiAqICAgICAgICAgICAgIDwvVmlldz5cbiAqICAgICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICAgICAgICk7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqICAgICBjbGFzcyBNdWx0aVNlbGVjdExpc3QgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAqICAgICAgIHN0YXRlID0ge3NlbGVjdGVkOiAobmV3IE1hcCgpOiBNYXA8c3RyaW5nLCBib29sZWFuPil9O1xuICpcbiAqICAgICAgIF9rZXlFeHRyYWN0b3IgPSAoaXRlbSwgaW5kZXgpID0+IGl0ZW0uaWQ7XG4gKlxuICogICAgICAgX29uUHJlc3NJdGVtID0gKGlkOiBzdHJpbmcpID0+IHtcbiAqICAgICAgICAgLy8gdXBkYXRlciBmdW5jdGlvbnMgYXJlIHByZWZlcnJlZCBmb3IgdHJhbnNhY3Rpb25hbCB1cGRhdGVzXG4gKiAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gKiAgICAgICAgICAgLy8gY29weSB0aGUgbWFwIHJhdGhlciB0aGFuIG1vZGlmeWluZyBzdGF0ZS5cbiAqICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IG5ldyBNYXAoc3RhdGUuc2VsZWN0ZWQpO1xuICogICAgICAgICAgIHNlbGVjdGVkLnNldChpZCwgIXNlbGVjdGVkLmdldChpZCkpOyAvLyB0b2dnbGVcbiAqICAgICAgICAgICByZXR1cm4ge3NlbGVjdGVkfTtcbiAqICAgICAgICAgfSk7XG4gKiAgICAgICB9O1xuICpcbiAqICAgICAgIF9yZW5kZXJJdGVtID0gKHtpdGVtfSkgPT4gKFxuICogICAgICAgICA8TXlMaXN0SXRlbVxuICogICAgICAgICAgIGlkPXtpdGVtLmlkfVxuICogICAgICAgICAgIG9uUHJlc3NJdGVtPXt0aGlzLl9vblByZXNzSXRlbX1cbiAqICAgICAgICAgICBzZWxlY3RlZD17ISF0aGlzLnN0YXRlLnNlbGVjdGVkLmdldChpdGVtLmlkKX1cbiAqICAgICAgICAgICB0aXRsZT17aXRlbS50aXRsZX1cbiAqICAgICAgICAgLz5cbiAqICAgICAgICk7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gKFxuICogICAgICAgICAgIDxGbGF0TGlzdFxuICogICAgICAgICAgICAgZGF0YT17dGhpcy5wcm9wcy5kYXRhfVxuICogICAgICAgICAgICAgZXh0cmFEYXRhPXt0aGlzLnN0YXRlfVxuICogICAgICAgICAgICAga2V5RXh0cmFjdG9yPXt0aGlzLl9rZXlFeHRyYWN0b3J9XG4gKiAgICAgICAgICAgICByZW5kZXJJdGVtPXt0aGlzLl9yZW5kZXJJdGVtfVxuICogICAgICAgICAgIC8+XG4gKiAgICAgICAgICk7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqIFRoaXMgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBbYDxWaXJ0dWFsaXplZExpc3Q+YF0oZG9jcy92aXJ0dWFsaXplZGxpc3QuaHRtbCksXG4gKiBhbmQgdGh1cyBpbmhlcml0cyBpdHMgcHJvcHMgKGFzIHdlbGwgYXMgdGhvc2Ugb2YgYFNjcm9sbFZpZXdgKSB0aGF0IGFyZW4ndCBleHBsaWNpdGx5IGxpc3RlZFxuICogaGVyZSwgYWxvbmcgd2l0aCB0aGUgZm9sbG93aW5nIGNhdmVhdHM6XG4gKlxuICogLSBJbnRlcm5hbCBzdGF0ZSBpcyBub3QgcHJlc2VydmVkIHdoZW4gY29udGVudCBzY3JvbGxzIG91dCBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gTWFrZSBzdXJlIGFsbFxuICogICB5b3VyIGRhdGEgaXMgY2FwdHVyZWQgaW4gdGhlIGl0ZW0gZGF0YSBvciBleHRlcm5hbCBzdG9yZXMgbGlrZSBGbHV4LCBSZWR1eCwgb3IgUmVsYXkuXG4gKiAtIFRoaXMgaXMgYSBgUHVyZUNvbXBvbmVudGAgd2hpY2ggbWVhbnMgdGhhdCBpdCB3aWxsIG5vdCByZS1yZW5kZXIgaWYgYHByb3BzYCByZW1haW4gc2hhbGxvdy1cbiAqICAgZXF1YWwuIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgeW91ciBgcmVuZGVySXRlbWAgZnVuY3Rpb24gZGVwZW5kcyBvbiBpcyBwYXNzZWQgYXMgYSBwcm9wXG4gKiAgIChlLmcuIGBleHRyYURhdGFgKSB0aGF0IGlzIG5vdCBgPT09YCBhZnRlciB1cGRhdGVzLCBvdGhlcndpc2UgeW91ciBVSSBtYXkgbm90IHVwZGF0ZSBvblxuICogICBjaGFuZ2VzLiBUaGlzIGluY2x1ZGVzIHRoZSBgZGF0YWAgcHJvcCBhbmQgcGFyZW50IGNvbXBvbmVudCBzdGF0ZS5cbiAqIC0gSW4gb3JkZXIgdG8gY29uc3RyYWluIG1lbW9yeSBhbmQgZW5hYmxlIHNtb290aCBzY3JvbGxpbmcsIGNvbnRlbnQgaXMgcmVuZGVyZWQgYXN5bmNocm9ub3VzbHlcbiAqICAgb2Zmc2NyZWVuLiBUaGlzIG1lYW5zIGl0J3MgcG9zc2libGUgdG8gc2Nyb2xsIGZhc3RlciB0aGFuIHRoZSBmaWxsIHJhdGUgYW5kcyBtb21lbnRhcmlseSBzZWVcbiAqICAgYmxhbmsgY29udGVudC4gVGhpcyBpcyBhIHRyYWRlb2ZmIHRoYXQgY2FuIGJlIGFkanVzdGVkIHRvIHN1aXQgdGhlIG5lZWRzIG9mIGVhY2ggYXBwbGljYXRpb24sXG4gKiAgIGFuZCB3ZSBhcmUgd29ya2luZyBvbiBpbXByb3ZpbmcgaXQgYmVoaW5kIHRoZSBzY2VuZXMuXG4gKiAtIEJ5IGRlZmF1bHQsIHRoZSBsaXN0IGxvb2tzIGZvciBhIGBrZXlgIHByb3Agb24gZWFjaCBpdGVtIGFuZCB1c2VzIHRoYXQgZm9yIHRoZSBSZWFjdCBrZXkuXG4gKiAgIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcHJvdmlkZSBhIGN1c3RvbSBga2V5RXh0cmFjdG9yYCBwcm9wLlxuICpcbiAqIEFsc28gaW5oZXJpdHMgW1Njcm9sbFZpZXcgUHJvcHNdKGRvY3Mvc2Nyb2xsdmlldy5odG1sI3Byb3BzKSwgdW5sZXNzIGl0IGlzIG5lc3RlZCBpbiBhbm90aGVyIEZsYXRMaXN0IG9mIHNhbWUgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEZsYXRMaXN0PEl0ZW1UPiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHM8SXRlbVQ+LCB2b2lkPiB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHM6IERlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbiAgcHJvcHM6IFByb3BzPEl0ZW1UPjtcbiAgLyoqXG4gICAqIFNjcm9sbHMgdG8gdGhlIGVuZCBvZiB0aGUgY29udGVudC4gTWF5IGJlIGphbmt5IHdpdGhvdXQgYGdldEl0ZW1MYXlvdXRgIHByb3AuXG4gICAqL1xuICBzY3JvbGxUb0VuZChwYXJhbXM/OiA/e2FuaW1hdGVkPzogP2Jvb2xlYW59KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9FbmQocGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0byB0aGUgaXRlbSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IHN1Y2ggdGhhdCBpdCBpcyBwb3NpdGlvbmVkIGluIHRoZSB2aWV3YWJsZSBhcmVhXG4gICAqIHN1Y2ggdGhhdCBgdmlld1Bvc2l0aW9uYCAwIHBsYWNlcyBpdCBhdCB0aGUgdG9wLCAxIGF0IHRoZSBib3R0b20sIGFuZCAwLjUgY2VudGVyZWQgaW4gdGhlXG4gICAqIG1pZGRsZS4gYHZpZXdPZmZzZXRgIGlzIGEgZml4ZWQgbnVtYmVyIG9mIHBpeGVscyB0byBvZmZzZXQgdGhlIGZpbmFsIHRhcmdldCBwb3NpdGlvbi5cbiAgICpcbiAgICogTm90ZTogY2Fubm90IHNjcm9sbCB0byBsb2NhdGlvbnMgb3V0c2lkZSB0aGUgcmVuZGVyIHdpbmRvdyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9JbmRleChwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdmlld09mZnNldD86IG51bWJlcixcbiAgICB2aWV3UG9zaXRpb24/OiBudW1iZXIsXG4gIH0pIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgLy8gJEZsb3dGaXhNZSBGb3VuZCB3aGVuIHR5cGluZyBMaXN0Vmlld1xuICAgICAgdGhpcy5fbGlzdFJlZi5zY3JvbGxUb0luZGV4KHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVpcmVzIGxpbmVhciBzY2FuIHRocm91Z2ggZGF0YSAtIHVzZSBgc2Nyb2xsVG9JbmRleGAgaW5zdGVhZCBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogTm90ZTogY2Fubm90IHNjcm9sbCB0byBsb2NhdGlvbnMgb3V0c2lkZSB0aGUgcmVuZGVyIHdpbmRvdyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9JdGVtKHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaXRlbTogSXRlbVQsXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICB9KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIC8vICRGbG93Rml4TWUgRm91bmQgd2hlbiB0eXBpbmcgTGlzdFZpZXdcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9JdGVtKHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBhIHNwZWNpZmljIGNvbnRlbnQgcGl4ZWwgb2Zmc2V0IGluIHRoZSBsaXN0LlxuICAgKlxuICAgKiBDaGVjayBvdXQgW3Njcm9sbFRvT2Zmc2V0XShkb2NzL3ZpcnR1YWxpemVkbGlzdC5odG1sI3Njcm9sbHRvb2Zmc2V0KSBvZiBWaXJ0dWFsaXplZExpc3RcbiAgICovXG4gIHNjcm9sbFRvT2Zmc2V0KHBhcmFtczoge2FuaW1hdGVkPzogP2Jvb2xlYW4sIG9mZnNldDogbnVtYmVyfSkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lIEZvdW5kIHdoZW4gdHlwaW5nIExpc3RWaWV3XG4gICAgICB0aGlzLl9saXN0UmVmLnNjcm9sbFRvT2Zmc2V0KHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlbGxzIHRoZSBsaXN0IGFuIGludGVyYWN0aW9uIGhhcyBvY2N1cnJlZCwgd2hpY2ggc2hvdWxkIHRyaWdnZXIgdmlld2FiaWxpdHkgY2FsY3VsYXRpb25zLCBlLmcuXG4gICAqIGlmIGB3YWl0Rm9ySW50ZXJhY3Rpb25zYCBpcyB0cnVlIGFuZCB0aGUgdXNlciBoYXMgbm90IHNjcm9sbGVkLiBUaGlzIGlzIHR5cGljYWxseSBjYWxsZWQgYnlcbiAgICogdGFwcyBvbiBpdGVtcyBvciBieSBuYXZpZ2F0aW9uIGFjdGlvbnMuXG4gICAqL1xuICByZWNvcmRJbnRlcmFjdGlvbigpIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgLy8gJEZsb3dGaXhNZSBGb3VuZCB3aGVuIHR5cGluZyBMaXN0Vmlld1xuICAgICAgdGhpcy5fbGlzdFJlZi5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgc2Nyb2xsIGluZGljYXRvcnMgbW9tZW50YXJpbHkuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGZsYXNoU2Nyb2xsSW5kaWNhdG9ycygpIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgLy8gJEZsb3dGaXhNZSBGb3VuZCB3aGVuIHR5cGluZyBMaXN0Vmlld1xuICAgICAgdGhpcy5fbGlzdFJlZi5mbGFzaFNjcm9sbEluZGljYXRvcnMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBoYW5kbGUgdG8gdGhlIHVuZGVybHlpbmcgc2Nyb2xsIHJlc3BvbmRlci5cbiAgICovXG4gIGdldFNjcm9sbFJlc3BvbmRlcigpIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgLy8gJEZsb3dGaXhNZSBGb3VuZCB3aGVuIHR5cGluZyBMaXN0Vmlld1xuICAgICAgcmV0dXJuIHRoaXMuX2xpc3RSZWYuZ2V0U2Nyb2xsUmVzcG9uZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U2Nyb2xsYWJsZU5vZGUoKSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIC8vICRGbG93Rml4TWUgRm91bmQgd2hlbiB0eXBpbmcgTGlzdFZpZXdcbiAgICAgIHJldHVybiB0aGlzLl9saXN0UmVmLmdldFNjcm9sbGFibGVOb2RlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0TmF0aXZlUHJvcHMocHJvcHM6IHtbc3RyaW5nXTogbWl4ZWR9KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2V0TmF0aXZlUHJvcHMocHJvcHMpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wczxJdGVtVD4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5fY2hlY2tQcm9wcyh0aGlzLnByb3BzKTtcbiAgICBpZiAodGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMpIHtcbiAgICAgIHRoaXMuX3ZpcnR1YWxpemVkTGlzdFBhaXJzID0gdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMubWFwKFxuICAgICAgICBwYWlyID0+ICh7XG4gICAgICAgICAgdmlld2FiaWxpdHlDb25maWc6IHBhaXIudmlld2FiaWxpdHlDb25maWcsXG4gICAgICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZDogdGhpcy5fY3JlYXRlT25WaWV3YWJsZUl0ZW1zQ2hhbmdlZChcbiAgICAgICAgICAgIHBhaXIub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICAgICApLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLm9uVmlld2FibGVJdGVtc0NoYW5nZWQpIHtcbiAgICAgIC8qICRGbG93Rml4TWUoPj0wLjYzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjMgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzXG4gICAgICAgKiBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIHRoaXMuX3ZpcnR1YWxpemVkTGlzdFBhaXJzLnB1c2goe1xuICAgICAgICB2aWV3YWJpbGl0eUNvbmZpZzogdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZyxcbiAgICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZDogdGhpcy5fY3JlYXRlT25WaWV3YWJsZUl0ZW1zQ2hhbmdlZChcbiAgICAgICAgICB0aGlzLnByb3BzLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgICksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQcm9wczxJdGVtVD4pIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBwcmV2UHJvcHMubnVtQ29sdW1ucyA9PT0gdGhpcy5wcm9wcy5udW1Db2x1bW5zLFxuICAgICAgJ0NoYW5naW5nIG51bUNvbHVtbnMgb24gdGhlIGZseSBpcyBub3Qgc3VwcG9ydGVkLiBDaGFuZ2UgdGhlIGtleSBwcm9wIG9uIEZsYXRMaXN0IHdoZW4gJyArXG4gICAgICAgICdjaGFuZ2luZyB0aGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gZm9yY2UgYSBmcmVzaCByZW5kZXIgb2YgdGhlIGNvbXBvbmVudC4nLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgcHJldlByb3BzLm9uVmlld2FibGVJdGVtc0NoYW5nZWQgPT09IHRoaXMucHJvcHMub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICdDaGFuZ2luZyBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIG9uIHRoZSBmbHkgaXMgbm90IHN1cHBvcnRlZCcsXG4gICAgKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBwcmV2UHJvcHMudmlld2FiaWxpdHlDb25maWcgPT09IHRoaXMucHJvcHMudmlld2FiaWxpdHlDb25maWcsXG4gICAgICAnQ2hhbmdpbmcgdmlld2FiaWxpdHlDb25maWcgb24gdGhlIGZseSBpcyBub3Qgc3VwcG9ydGVkJyxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIHByZXZQcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMgPT09XG4gICAgICAgIHRoaXMucHJvcHMudmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzLFxuICAgICAgJ0NoYW5naW5nIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycyBvbiB0aGUgZmx5IGlzIG5vdCBzdXBwb3J0ZWQnLFxuICAgICk7XG5cbiAgICB0aGlzLl9jaGVja1Byb3BzKHRoaXMucHJvcHMpO1xuICB9XG5cbiAgX2hhc1dhcm5lZExlZ2FjeSA9IGZhbHNlO1xuICBfbGlzdFJlZjogbnVsbCB8IFZpcnR1YWxpemVkTGlzdCB8IExpc3RWaWV3IHwgTWV0cm9MaXN0VmlldztcbiAgX3ZpcnR1YWxpemVkTGlzdFBhaXJzOiBBcnJheTxWaWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcj4gPSBbXTtcblxuICBfY2FwdHVyZVJlZiA9IHJlZiA9PiB7XG4gICAgdGhpcy5fbGlzdFJlZiA9IHJlZjtcbiAgfTtcblxuICBfY2hlY2tQcm9wcyhwcm9wczogUHJvcHM8SXRlbVQ+KSB7XG4gICAgY29uc3Qge1xuICAgICAgZ2V0SXRlbSxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIGhvcml6b250YWwsXG4gICAgICBsZWdhY3lJbXBsZW1lbnRhdGlvbixcbiAgICAgIG51bUNvbHVtbnMsXG4gICAgICBjb2x1bW5XcmFwcGVyU3R5bGUsXG4gICAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgdmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzLFxuICAgIH0gPSBwcm9wcztcbiAgICBpbnZhcmlhbnQoXG4gICAgICAhZ2V0SXRlbSAmJiAhZ2V0SXRlbUNvdW50LFxuICAgICAgJ0ZsYXRMaXN0IGRvZXMgbm90IHN1cHBvcnQgY3VzdG9tIGRhdGEgZm9ybWF0cy4nLFxuICAgICk7XG4gICAgaWYgKG51bUNvbHVtbnMgPiAxKSB7XG4gICAgICBpbnZhcmlhbnQoIWhvcml6b250YWwsICdudW1Db2x1bW5zIGRvZXMgbm90IHN1cHBvcnQgaG9yaXpvbnRhbC4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICAhY29sdW1uV3JhcHBlclN0eWxlLFxuICAgICAgICAnY29sdW1uV3JhcHBlclN0eWxlIG5vdCBzdXBwb3J0ZWQgZm9yIHNpbmdsZSBjb2x1bW4gbGlzdHMnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGxlZ2FjeUltcGxlbWVudGF0aW9uKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIG51bUNvbHVtbnMgPT09IDEsXG4gICAgICAgICdMZWdhY3kgbGlzdCBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGxlIGNvbHVtbnMuJyxcbiAgICAgICk7XG4gICAgICAvLyBXYXJuaW5nOiBtYXkgbm90IGhhdmUgZnVsbCBmZWF0dXJlIHBhcml0eSBhbmQgaXMgbWVhbnQgbW9yZSBmb3IgZGVidWdnaW5nIGFuZCBwZXJmb3JtYW5jZVxuICAgICAgLy8gY29tcGFyaXNvbi5cbiAgICAgIGlmICghdGhpcy5faGFzV2FybmVkTGVnYWN5KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnRmxhdExpc3Q6IFVzaW5nIGxlZ2FjeUltcGxlbWVudGF0aW9uIC0gc29tZSBmZWF0dXJlcyBub3Qgc3VwcG9ydGVkIGFuZCBwZXJmb3JtYW5jZSAnICtcbiAgICAgICAgICAgICdtYXkgc3VmZmVyJyxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5faGFzV2FybmVkTGVnYWN5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgIShvblZpZXdhYmxlSXRlbXNDaGFuZ2VkICYmIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycyksXG4gICAgICAnRmxhdExpc3QgZG9lcyBub3Qgc3VwcG9ydCBzZXR0aW5nIGJvdGggb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBhbmQgJyArXG4gICAgICAgICd2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMuJyxcbiAgICApO1xuICB9XG5cbiAgX2dldEl0ZW0gPSAoZGF0YTogQXJyYXk8SXRlbVQ+LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qge251bUNvbHVtbnN9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAobnVtQ29sdW1ucyA+IDEpIHtcbiAgICAgIGNvbnN0IHJldCA9IFtdO1xuICAgICAgZm9yIChsZXQga2sgPSAwOyBrayA8IG51bUNvbHVtbnM7IGtrKyspIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGRhdGFbaW5kZXggKiBudW1Db2x1bW5zICsga2tdO1xuICAgICAgICBpZiAoaXRlbSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0LnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkYXRhW2luZGV4XTtcbiAgICB9XG4gIH07XG5cbiAgX2dldEl0ZW1Db3VudCA9IChkYXRhOiA/QXJyYXk8SXRlbVQ+KTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gZGF0YSA/IE1hdGguY2VpbChkYXRhLmxlbmd0aCAvIHRoaXMucHJvcHMubnVtQ29sdW1ucykgOiAwO1xuICB9O1xuXG4gIF9rZXlFeHRyYWN0b3IgPSAoaXRlbXM6IEl0ZW1UIHwgQXJyYXk8SXRlbVQ+LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qge2tleUV4dHJhY3RvciwgbnVtQ29sdW1uc30gPSB0aGlzLnByb3BzO1xuICAgIGlmIChudW1Db2x1bW5zID4gMSkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICBBcnJheS5pc0FycmF5KGl0ZW1zKSxcbiAgICAgICAgJ0ZsYXRMaXN0OiBFbmNvdW50ZXJlZCBpbnRlcm5hbCBjb25zaXN0ZW5jeSBlcnJvciwgZXhwZWN0ZWQgZWFjaCBpdGVtIHRvIGNvbnNpc3Qgb2YgYW4gJyArXG4gICAgICAgICAgJ2FycmF5IHdpdGggMS0lcyBjb2x1bW5zOyBpbnN0ZWFkLCByZWNlaXZlZCBhIHNpbmdsZSBpdGVtLicsXG4gICAgICAgIG51bUNvbHVtbnMsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5tYXAoKGl0LCBraykgPT4ga2V5RXh0cmFjdG9yKGl0LCBpbmRleCAqIG51bUNvbHVtbnMgKyBraykpXG4gICAgICAgIC5qb2luKCc6Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qICRGbG93Rml4TWUoPj0wLjYzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjMgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yIGRlbGV0ZSB0aGlzXG4gICAgICAgKiBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIHJldHVybiBrZXlFeHRyYWN0b3IoaXRlbXMsIGluZGV4KTtcbiAgICB9XG4gIH07XG5cbiAgX3B1c2hNdWx0aUNvbHVtblZpZXdhYmxlKGFycjogQXJyYXk8Vmlld1Rva2VuPiwgdjogVmlld1Rva2VuKTogdm9pZCB7XG4gICAgY29uc3Qge251bUNvbHVtbnMsIGtleUV4dHJhY3Rvcn0gPSB0aGlzLnByb3BzO1xuICAgIHYuaXRlbS5mb3JFYWNoKChpdGVtLCBpaSkgPT4ge1xuICAgICAgaW52YXJpYW50KHYuaW5kZXggIT0gbnVsbCwgJ01pc3NpbmcgaW5kZXghJyk7XG4gICAgICBjb25zdCBpbmRleCA9IHYuaW5kZXggKiBudW1Db2x1bW5zICsgaWk7XG4gICAgICBhcnIucHVzaCh7Li4udiwgaXRlbSwga2V5OiBrZXlFeHRyYWN0b3IoaXRlbSwgaW5kZXgpLCBpbmRleH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2NyZWF0ZU9uVmlld2FibGVJdGVtc0NoYW5nZWQoXG4gICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZDogPyhpbmZvOiB7XG4gICAgICB2aWV3YWJsZUl0ZW1zOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgICB9KSA9PiB2b2lkLFxuICApIHtcbiAgICByZXR1cm4gKGluZm86IHtcbiAgICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgICBjaGFuZ2VkOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IHtudW1Db2x1bW5zfSA9IHRoaXMucHJvcHM7XG4gICAgICBpZiAob25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCkge1xuICAgICAgICBpZiAobnVtQ29sdW1ucyA+IDEpIHtcbiAgICAgICAgICBjb25zdCBjaGFuZ2VkID0gW107XG4gICAgICAgICAgY29uc3Qgdmlld2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgIGluZm8udmlld2FibGVJdGVtcy5mb3JFYWNoKHYgPT5cbiAgICAgICAgICAgIHRoaXMuX3B1c2hNdWx0aUNvbHVtblZpZXdhYmxlKHZpZXdhYmxlSXRlbXMsIHYpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaW5mby5jaGFuZ2VkLmZvckVhY2godiA9PiB0aGlzLl9wdXNoTXVsdGlDb2x1bW5WaWV3YWJsZShjaGFuZ2VkLCB2KSk7XG4gICAgICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCh7dmlld2FibGVJdGVtcywgY2hhbmdlZH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQoaW5mbyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgX3JlbmRlckl0ZW0gPSAoaW5mbzogT2JqZWN0KSA9PiB7XG4gICAgY29uc3Qge3JlbmRlckl0ZW0sIG51bUNvbHVtbnMsIGNvbHVtbldyYXBwZXJTdHlsZX0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChudW1Db2x1bW5zID4gMSkge1xuICAgICAgY29uc3Qge2l0ZW0sIGluZGV4fSA9IGluZm87XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIEFycmF5LmlzQXJyYXkoaXRlbSksXG4gICAgICAgICdFeHBlY3RlZCBhcnJheSBvZiBpdGVtcyB3aXRoIG51bUNvbHVtbnMgPiAxJyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICBzdHlsZXMucm93LFxuICAgICAgICAgICAgY29sdW1uV3JhcHBlclN0eWxlLFxuICAgICAgICAgICl9PlxuICAgICAgICAgIHtpdGVtLm1hcCgoaXQsIGtrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gcmVuZGVySXRlbSh7XG4gICAgICAgICAgICAgIGl0ZW06IGl0LFxuICAgICAgICAgICAgICBpbmRleDogaW5kZXggKiBudW1Db2x1bW5zICsga2ssXG4gICAgICAgICAgICAgIHNlcGFyYXRvcnM6IGluZm8uc2VwYXJhdG9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQgJiYgUmVhY3QuY2xvbmVFbGVtZW50KGVsZW1lbnQsIHtrZXk6IGtrfSk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZW5kZXJJdGVtKGluZm8pO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMubGVnYWN5SW1wbGVtZW50YXRpb24pIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIC8qICRGbG93Rml4TWUoPj0wLjY2LjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42NiB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlXG4gICAgICAgICAqIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAgIDxNZXRyb0xpc3RWaWV3XG4gICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgLyogJEZsb3dGaXhNZSg+PTAuNjYuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXNcbiAgICAgICAgICAgKiBhbiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjYgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yXG4gICAgICAgICAgICogZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAgICAgaXRlbXM9e3RoaXMucHJvcHMuZGF0YX1cbiAgICAgICAgICByZWY9e3RoaXMuX2NhcHR1cmVSZWZ9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VmlydHVhbGl6ZWRMaXN0XG4gICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgcmVuZGVySXRlbT17dGhpcy5fcmVuZGVySXRlbX1cbiAgICAgICAgICBnZXRJdGVtPXt0aGlzLl9nZXRJdGVtfVxuICAgICAgICAgIGdldEl0ZW1Db3VudD17dGhpcy5fZ2V0SXRlbUNvdW50fVxuICAgICAgICAgIGtleUV4dHJhY3Rvcj17dGhpcy5fa2V5RXh0cmFjdG9yfVxuICAgICAgICAgIHJlZj17dGhpcy5fY2FwdHVyZVJlZn1cbiAgICAgICAgICB2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnM9e3RoaXMuX3ZpcnR1YWxpemVkTGlzdFBhaXJzfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICByb3c6IHtmbGV4RGlyZWN0aW9uOiAncm93J30sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGbGF0TGlzdDtcbiJdfQ==