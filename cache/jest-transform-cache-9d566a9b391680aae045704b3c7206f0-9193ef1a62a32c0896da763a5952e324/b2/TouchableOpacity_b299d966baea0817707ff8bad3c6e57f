9f1a3a3041d4fcb0d53cfa7ced84e3f8










'use strict';var _extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};

var Animated = require('Animated');
var Easing = require('Easing');
var NativeMethodsMixin = require('NativeMethodsMixin');
var React = require('React');
var PropTypes = require('prop-types');
var TimerMixin = require('react-timer-mixin');
var Touchable = require('Touchable');
var TouchableWithoutFeedback = require('TouchableWithoutFeedback');

var createReactClass = require('create-react-class');
var ensurePositiveDelayProps = require('ensurePositiveDelayProps');
var flattenStyle = require('flattenStyle');






var PRESS_RETENTION_OFFSET = { top: 20, left: 20, right: 20, bottom: 30 };





































































































var TouchableOpacity = createReactClass({
  displayName: 'TouchableOpacity',
  mixins: [TimerMixin, Touchable.Mixin, NativeMethodsMixin],

  propTypes: _extends({},
  TouchableWithoutFeedback.propTypes, {




    activeOpacity: PropTypes.number,



    hasTVPreferredFocus: PropTypes.bool,



    tvParallaxProperties: PropTypes.object }),


  getDefaultProps: function getDefaultProps() {
    return {
      activeOpacity: 0.2 };

  },

  getInitialState: function getInitialState() {
    return _extends({},
    this.touchableGetInitialState(), {
      anim: new Animated.Value(this._getChildStyleOpacityWithDefault()) });

  },

  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },

  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },

  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {
    if (this.props.disabled !== prevProps.disabled) {
      this._opacityInactive(250);
    }
  },




  setOpacityTo: function setOpacityTo(value, duration) {
    Animated.timing(this.state.anim, {
      toValue: value,
      duration: duration,
      easing: Easing.inOut(Easing.quad),
      useNativeDriver: true }).
    start();
  },





  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    if (e.dispatchConfig.registrationName === 'onResponderGrant') {
      this._opacityActive(0);
    } else {
      this._opacityActive(150);
    }
    this.props.onPressIn && this.props.onPressIn(e);
  },

  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this._opacityInactive(250);
    this.props.onPressOut && this.props.onPressOut(e);
  },

  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },

  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },

  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },

  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },

  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },

  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ?
    0 :
    this.props.delayLongPress || 500;
  },

  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut;
  },

  _opacityActive: function _opacityActive(duration) {
    this.setOpacityTo(this.props.activeOpacity, duration);
  },

  _opacityInactive: function _opacityInactive(duration) {
    this.setOpacityTo(this._getChildStyleOpacityWithDefault(), duration);
  },

  _getChildStyleOpacityWithDefault: function _getChildStyleOpacityWithDefault() {
    var childStyle = flattenStyle(this.props.style) || {};
    return childStyle.opacity == undefined ? 1 : childStyle.opacity;
  },

  render: function render() {
    return (
      React.createElement(Animated.View, {
          accessible: this.props.accessible !== false,
          accessibilityLabel: this.props.accessibilityLabel,
          accessibilityHint: this.props.accessibilityHint,
          accessibilityRole: this.props.accessibilityRole,
          accessibilityStates: this.props.accessibilityStates,
          style: [this.props.style, { opacity: this.state.anim }],
          nativeID: this.props.nativeID,
          testID: this.props.testID,
          onLayout: this.props.onLayout,
          isTVSelectable: true,
          hasTVPreferredFocus: this.props.hasTVPreferredFocus,
          tvParallaxProperties: this.props.tvParallaxProperties,
          hitSlop: this.props.hitSlop,
          onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
          onResponderTerminationRequest:
          this.touchableHandleResponderTerminationRequest,

          onResponderGrant: this.touchableHandleResponderGrant,
          onResponderMove: this.touchableHandleResponderMove,
          onResponderRelease: this.touchableHandleResponderRelease,
          onResponderTerminate: this.touchableHandleResponderTerminate },
        this.props.children,
        Touchable.renderDebugView({
          color: 'cyan',
          hitSlop: this.props.hitSlop })));



  } });


module.exports = TouchableOpacity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU9wYWNpdHkuanMiXSwibmFtZXMiOlsiQW5pbWF0ZWQiLCJyZXF1aXJlIiwiRWFzaW5nIiwiTmF0aXZlTWV0aG9kc01peGluIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJUaW1lck1peGluIiwiVG91Y2hhYmxlIiwiVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIiwiY3JlYXRlUmVhY3RDbGFzcyIsImVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyIsImZsYXR0ZW5TdHlsZSIsIlBSRVNTX1JFVEVOVElPTl9PRkZTRVQiLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJUb3VjaGFibGVPcGFjaXR5IiwiZGlzcGxheU5hbWUiLCJtaXhpbnMiLCJNaXhpbiIsInByb3BUeXBlcyIsImFjdGl2ZU9wYWNpdHkiLCJudW1iZXIiLCJoYXNUVlByZWZlcnJlZEZvY3VzIiwiYm9vbCIsInR2UGFyYWxsYXhQcm9wZXJ0aWVzIiwib2JqZWN0IiwiZ2V0RGVmYXVsdFByb3BzIiwiZ2V0SW5pdGlhbFN0YXRlIiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwiYW5pbSIsIlZhbHVlIiwiX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQiLCJjb21wb25lbnREaWRNb3VudCIsInByb3BzIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJkaXNhYmxlZCIsIl9vcGFjaXR5SW5hY3RpdmUiLCJzZXRPcGFjaXR5VG8iLCJ2YWx1ZSIsImR1cmF0aW9uIiwidGltaW5nIiwic3RhdGUiLCJ0b1ZhbHVlIiwiZWFzaW5nIiwiaW5PdXQiLCJxdWFkIiwidXNlTmF0aXZlRHJpdmVyIiwic3RhcnQiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwiZSIsImRpc3BhdGNoQ29uZmlnIiwicmVnaXN0cmF0aW9uTmFtZSIsIl9vcGFjaXR5QWN0aXZlIiwib25QcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJvblByZXNzT3V0IiwidG91Y2hhYmxlSGFuZGxlUHJlc3MiLCJvblByZXNzIiwidG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzIiwib25Mb25nUHJlc3MiLCJ0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQiLCJwcmVzc1JldGVudGlvbk9mZnNldCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJoaXRTbG9wIiwidG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUyIsImRlbGF5UHJlc3NJbiIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJkZWxheUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsImRlbGF5UHJlc3NPdXQiLCJjaGlsZFN0eWxlIiwic3R5bGUiLCJvcGFjaXR5IiwidW5kZWZpbmVkIiwicmVuZGVyIiwiYWNjZXNzaWJsZSIsImFjY2Vzc2liaWxpdHlMYWJlbCIsImFjY2Vzc2liaWxpdHlIaW50IiwiYWNjZXNzaWJpbGl0eVJvbGUiLCJhY2Nlc3NpYmlsaXR5U3RhdGVzIiwibmF0aXZlSUQiLCJ0ZXN0SUQiLCJvbkxheW91dCIsInRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSIsImNoaWxkcmVuIiwicmVuZGVyRGVidWdWaWV3IiwiY29sb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBVUEsYTs7QUFFQSxJQUFNQSxXQUFXQyxRQUFRLFVBQVIsQ0FBakI7QUFDQSxJQUFNQyxTQUFTRCxRQUFR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QjtBQW1CRSwyQkFBaUIsS0FBS0MsNEJBbkJ4QjtBQW9CRSw4QkFBb0IsS0FBS0MsK0JBcEIzQjtBQXFCRSxnQ0FBc0IsS0FBS0MsaUNBckI3QjtBQXNCRyxhQUFLM0QsS0FBTCxDQUFXNEQsUUF0QmQ7QUF1Qkd4RixrQkFBVXlGLGVBQVYsQ0FBMEI7QUFDekJDLGlCQUFPLE1BRGtCO0FBRXpCNUIsbUJBQVMsS0FBS2xDLEtBQUwsQ0FBV2tDLE9BRkssRUFBMUIsQ0F2QkgsQ0FERjs7OztBQThCRCxHQXhKeUMsRUFBakIsQ0FBM0I7OztBQTJKQTZCLE9BQU9DLE9BQVAsR0FBaUJsRixnQkFBakIiLCJmaWxlIjoiVG91Y2hhYmxlT3BhY2l0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEFuaW1hdGVkID0gcmVxdWlyZSgnQW5pbWF0ZWQnKTtcbmNvbnN0IEVhc2luZyA9IHJlcXVpcmUoJ0Vhc2luZycpO1xuY29uc3QgTmF0aXZlTWV0aG9kc01peGluID0gcmVxdWlyZSgnTmF0aXZlTWV0aG9kc01peGluJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ1JlYWN0Jyk7XG5jb25zdCBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5jb25zdCBUaW1lck1peGluID0gcmVxdWlyZSgncmVhY3QtdGltZXItbWl4aW4nKTtcbmNvbnN0IFRvdWNoYWJsZSA9IHJlcXVpcmUoJ1RvdWNoYWJsZScpO1xuY29uc3QgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrID0gcmVxdWlyZSgnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJyk7XG5cbmNvbnN0IGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbmNvbnN0IGVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyA9IHJlcXVpcmUoJ2Vuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcycpO1xuY29uc3QgZmxhdHRlblN0eWxlID0gcmVxdWlyZSgnZmxhdHRlblN0eWxlJyk7XG5cbmltcG9ydCB0eXBlIHtQcm9wcyBhcyBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2tQcm9wc30gZnJvbSAnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJztcbmltcG9ydCB0eXBlIHtWaWV3U3R5bGVQcm9wfSBmcm9tICdTdHlsZVNoZWV0JztcblxudHlwZSBFdmVudCA9IE9iamVjdDtcblxuY29uc3QgUFJFU1NfUkVURU5USU9OX09GRlNFVCA9IHt0b3A6IDIwLCBsZWZ0OiAyMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwfTtcblxudHlwZSBUVlByb3BzID0gJFJlYWRPbmx5PHt8XG4gIGhhc1RWUHJlZmVycmVkRm9jdXM/OiA/Ym9vbGVhbixcbiAgdHZQYXJhbGxheFByb3BlcnRpZXM/OiA/T2JqZWN0LFxufH0+O1xuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC4uLlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFja1Byb3BzLFxuICAuLi5UVlByb3BzLFxuICBhY3RpdmVPcGFjaXR5PzogP251bWJlcixcbiAgc3R5bGU/OiA/Vmlld1N0eWxlUHJvcCxcbnx9PjtcblxuLyoqXG4gKiBBIHdyYXBwZXIgZm9yIG1ha2luZyB2aWV3cyByZXNwb25kIHByb3Blcmx5IHRvIHRvdWNoZXMuXG4gKiBPbiBwcmVzcyBkb3duLCB0aGUgb3BhY2l0eSBvZiB0aGUgd3JhcHBlZCB2aWV3IGlzIGRlY3JlYXNlZCwgZGltbWluZyBpdC5cbiAqXG4gKiBPcGFjaXR5IGlzIGNvbnRyb2xsZWQgYnkgd3JhcHBpbmcgdGhlIGNoaWxkcmVuIGluIGFuIEFuaW1hdGVkLlZpZXcsIHdoaWNoIGlzXG4gKiBhZGRlZCB0byB0aGUgdmlldyBoaWVhcmNoeS4gIEJlIGF3YXJlIHRoYXQgdGhpcyBjYW4gYWZmZWN0IGxheW91dC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYFxuICogcmVuZGVyQnV0dG9uOiBmdW5jdGlvbigpIHtcbiAqICAgcmV0dXJuIChcbiAqICAgICA8VG91Y2hhYmxlT3BhY2l0eSBvblByZXNzPXt0aGlzLl9vblByZXNzQnV0dG9ufT5cbiAqICAgICAgIDxJbWFnZVxuICogICAgICAgICBzdHlsZT17c3R5bGVzLmJ1dHRvbn1cbiAqICAgICAgICAgc291cmNlPXtyZXF1aXJlKCcuL215QnV0dG9uLnBuZycpfVxuICogICAgICAgLz5cbiAqICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICk7XG4gKiB9LFxuICogYGBgXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG4gKiBpbXBvcnQge1xuICogICBBcHBSZWdpc3RyeSxcbiAqICAgU3R5bGVTaGVldCxcbiAqICAgVG91Y2hhYmxlT3BhY2l0eSxcbiAqICAgVGV4dCxcbiAqICAgVmlldyxcbiAqIH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuICpcbiAqIGNsYXNzIEFwcCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gKiAgICAgc3VwZXIocHJvcHMpXG4gKiAgICAgdGhpcy5zdGF0ZSA9IHsgY291bnQ6IDAgfVxuICogICB9XG4gKlxuICogICBvblByZXNzID0gKCkgPT4ge1xuICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICogICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY291bnQrMVxuICogICAgIH0pXG4gKiAgIH1cbiAqXG4gKiAgcmVuZGVyKCkge1xuICogICAgcmV0dXJuIChcbiAqICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICogICAgICAgIDxUb3VjaGFibGVPcGFjaXR5XG4gKiAgICAgICAgICBzdHlsZT17c3R5bGVzLmJ1dHRvbn1cbiAqICAgICAgICAgIG9uUHJlc3M9e3RoaXMub25QcmVzc31cbiAqICAgICAgICA+XG4gKiAgICAgICAgICA8VGV4dD4gVG91Y2ggSGVyZSA8L1RleHQ+XG4gKiAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICogICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmNvdW50Q29udGFpbmVyXX0+XG4gKiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5jb3VudFRleHRdfT5cbiAqICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5jb3VudCAhPT0gMCA/IHRoaXMuc3RhdGUuY291bnQ6IG51bGx9XG4gKiAgICAgICAgICAgPC9UZXh0PlxuICogICAgICAgICA8L1ZpZXc+XG4gKiAgICAgICA8L1ZpZXc+XG4gKiAgICAgKVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICogICBjb250YWluZXI6IHtcbiAqICAgICBmbGV4OiAxLFxuICogICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAqICAgICBwYWRkaW5nSG9yaXpvbnRhbDogMTBcbiAqICAgfSxcbiAqICAgYnV0dG9uOiB7XG4gKiAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gKiAgICAgYmFja2dyb3VuZENvbG9yOiAnI0RERERERCcsXG4gKiAgICAgcGFkZGluZzogMTBcbiAqICAgfSxcbiAqICAgY291bnRDb250YWluZXI6IHtcbiAqICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAqICAgICBwYWRkaW5nOiAxMFxuICogICB9LFxuICogICBjb3VudFRleHQ6IHtcbiAqICAgICBjb2xvcjogJyNGRjAwRkYnXG4gKiAgIH1cbiAqIH0pXG4gKlxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0FwcCcsICgpID0+IEFwcClcbiAqIGBgYFxuICpcbiAqL1xuY29uc3QgVG91Y2hhYmxlT3BhY2l0eSA9ICgoY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVG91Y2hhYmxlT3BhY2l0eScsXG4gIG1peGluczogW1RpbWVyTWl4aW4sIFRvdWNoYWJsZS5NaXhpbiwgTmF0aXZlTWV0aG9kc01peGluXSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICAuLi5Ub3VjaGFibGVXaXRob3V0RmVlZGJhY2sucHJvcFR5cGVzLFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hhdCB0aGUgb3BhY2l0eSBvZiB0aGUgd3JhcHBlZCB2aWV3IHNob3VsZCBiZSB3aGVuIHRvdWNoIGlzXG4gICAgICogYWN0aXZlLiBEZWZhdWx0cyB0byAwLjIuXG4gICAgICovXG4gICAgYWN0aXZlT3BhY2l0eTogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBUViBwcmVmZXJyZWQgZm9jdXMgKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgICAqL1xuICAgIGhhc1RWUHJlZmVycmVkRm9jdXM6IFByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIEFwcGxlIFRWIHBhcmFsbGF4IGVmZmVjdHNcbiAgICAgKi9cbiAgICB0dlBhcmFsbGF4UHJvcGVydGllczogUHJvcFR5cGVzLm9iamVjdCxcbiAgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmVPcGFjaXR5OiAwLjIsXG4gICAgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLFxuICAgICAgYW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSksXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMpIHtcbiAgICBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMobmV4dFByb3BzKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQgIT09IHByZXZQcm9wcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5fb3BhY2l0eUluYWN0aXZlKDI1MCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB0b3VjaGFibGUgdG8gYSBuZXcgb3BhY2l0eS5cbiAgICovXG4gIHNldE9wYWNpdHlUbzogZnVuY3Rpb24odmFsdWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmFuaW0sIHtcbiAgICAgIHRvVmFsdWU6IHZhbHVlLFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgZWFzaW5nOiBFYXNpbmcuaW5PdXQoRWFzaW5nLnF1YWQpLFxuICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlLFxuICAgIH0pLnN0YXJ0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGBUb3VjaGFibGUuTWl4aW5gIHNlbGYgY2FsbGJhY2tzLiBUaGUgbWl4aW4gd2lsbCBpbnZva2UgdGhlc2UgaWYgdGhleSBhcmVcbiAgICogZGVmaW5lZCBvbiB5b3VyIGNvbXBvbmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uKGU6IEV2ZW50KSB7XG4gICAgaWYgKGUuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSA9PT0gJ29uUmVzcG9uZGVyR3JhbnQnKSB7XG4gICAgICB0aGlzLl9vcGFjaXR5QWN0aXZlKDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vcGFjaXR5QWN0aXZlKDE1MCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25QcmVzc0luICYmIHRoaXMucHJvcHMub25QcmVzc0luKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMuX29wYWNpdHlJbmFjdGl2ZSgyNTApO1xuICAgIHRoaXMucHJvcHMub25QcmVzc091dCAmJiB0aGlzLnByb3BzLm9uUHJlc3NPdXQoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzICYmIHRoaXMucHJvcHMub25QcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3M6IGZ1bmN0aW9uKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyAmJiB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMucHJlc3NSZXRlbnRpb25PZmZzZXQgfHwgUFJFU1NfUkVURU5USU9OX09GRlNFVDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRIaXRTbG9wOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5oaXRTbG9wO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5UHJlc3NJbiB8fCAwO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5TG9uZ1ByZXNzID09PSAwXG4gICAgICA/IDBcbiAgICAgIDogdGhpcy5wcm9wcy5kZWxheUxvbmdQcmVzcyB8fCA1MDA7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzT3V0O1xuICB9LFxuXG4gIF9vcGFjaXR5QWN0aXZlOiBmdW5jdGlvbihkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRPcGFjaXR5VG8odGhpcy5wcm9wcy5hY3RpdmVPcGFjaXR5LCBkdXJhdGlvbik7XG4gIH0sXG5cbiAgX29wYWNpdHlJbmFjdGl2ZTogZnVuY3Rpb24oZHVyYXRpb246IG51bWJlcikge1xuICAgIHRoaXMuc2V0T3BhY2l0eVRvKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSwgZHVyYXRpb24pO1xuICB9LFxuXG4gIF9nZXRDaGlsZFN0eWxlT3BhY2l0eVdpdGhEZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjaGlsZFN0eWxlID0gZmxhdHRlblN0eWxlKHRoaXMucHJvcHMuc3R5bGUpIHx8IHt9O1xuICAgIHJldHVybiBjaGlsZFN0eWxlLm9wYWNpdHkgPT0gdW5kZWZpbmVkID8gMSA6IGNoaWxkU3R5bGUub3BhY2l0eTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICBhY2Nlc3NpYmxlPXt0aGlzLnByb3BzLmFjY2Vzc2libGUgIT09IGZhbHNlfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5SGludD17dGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5SGludH1cbiAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eVJvbGV9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZXM9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlc31cbiAgICAgICAgc3R5bGU9e1t0aGlzLnByb3BzLnN0eWxlLCB7b3BhY2l0eTogdGhpcy5zdGF0ZS5hbmltfV19XG4gICAgICAgIG5hdGl2ZUlEPXt0aGlzLnByb3BzLm5hdGl2ZUlEfVxuICAgICAgICB0ZXN0SUQ9e3RoaXMucHJvcHMudGVzdElEfVxuICAgICAgICBvbkxheW91dD17dGhpcy5wcm9wcy5vbkxheW91dH1cbiAgICAgICAgaXNUVlNlbGVjdGFibGU9e3RydWV9XG4gICAgICAgIGhhc1RWUHJlZmVycmVkRm9jdXM9e3RoaXMucHJvcHMuaGFzVFZQcmVmZXJyZWRGb2N1c31cbiAgICAgICAgdHZQYXJhbGxheFByb3BlcnRpZXM9e3RoaXMucHJvcHMudHZQYXJhbGxheFByb3BlcnRpZXN9XG4gICAgICAgIGhpdFNsb3A9e3RoaXMucHJvcHMuaGl0U2xvcH1cbiAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcj17dGhpcy50b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcn1cbiAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q9e1xuICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0XG4gICAgICAgIH1cbiAgICAgICAgb25SZXNwb25kZXJHcmFudD17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudH1cbiAgICAgICAgb25SZXNwb25kZXJNb3ZlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmV9XG4gICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlfVxuICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGV9PlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAge1RvdWNoYWJsZS5yZW5kZXJEZWJ1Z1ZpZXcoe1xuICAgICAgICAgIGNvbG9yOiAnY3lhbicsXG4gICAgICAgICAgaGl0U2xvcDogdGhpcy5wcm9wcy5oaXRTbG9wLFxuICAgICAgICB9KX1cbiAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICApO1xuICB9LFxufSk6IGFueSk6IFJlYWN0LkNvbXBvbmVudFR5cGU8UHJvcHM+KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaGFibGVPcGFjaXR5O1xuIl19